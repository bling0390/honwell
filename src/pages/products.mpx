<template>
  <view class="products-page">
    <view class="header-section">
      <text class="page-title">æœ€æ–°äº§å“</text>
      <text class="page-subtitle">æ¢ç´¢æˆ‘ä»¬çš„åˆ›æ–°è§£å†³æ–¹æ¡ˆ</text>
    </view>

    <view class="filter-section">
      <scroll-view class="filter-scroll" scroll-x>
        <view class="filter-list">
          <view 
            wx:for="{{categories}}" 
            wx:key="id"
            class="filter-item {{currentCategory === item.id ? 'active' : ''}}"
            bindtap="filterProducts"
            data-category="{{item.id}}"
          >
            {{item.name}}
          </view>
        </view>
      </scroll-view>
    </view>

    <view class="products-section">
      <view class="products-grid">
        <view 
          wx:for="{{filteredProducts}}" 
          wx:key="id"
          class="product-card"
          bindtap="viewProduct"
          data-id="{{item.id}}"
        >
          <view class="product-image">
            <text class="product-icon">{{item.iconText}}</text>
          </view>
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <text class="product-category">{{item.categoryName}}</text>
            <text class="product-description">{{item.description}}</text>
            <view class="product-footer">
              <text class="product-price" wx:if="{{item.price}}">Â¥{{item.price}}</text>
              <text class="product-status {{item.status === 'new' ? 'status-new' : item.status === 'hot' ? 'status-hot' : ''}}">
                {{item.status === 'new' ? 'æ–°å“' : item.status === 'hot' ? 'çƒ­é—¨' : 'æ¨è'}}
              </text>
            </view>
          </view>
        </view>
      </view>

      <view wx:if="{{filteredProducts.length === 0}}" class="empty-state">
        <text class="empty-icon">ğŸ“„</text>
        <text class="empty-text">æš‚æ— ç›¸å…³äº§å“</text>
      </view>
    </view>

    <view class="cta-section">
      <text class="cta-title">éœ€è¦å®šåˆ¶è§£å†³æ–¹æ¡ˆï¼Ÿ</text>
      <text class="cta-subtitle">è”ç³»æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿï¼Œä¸ºæ‚¨æä¾›ä¸ªæ€§åŒ–æœåŠ¡</text>
      <button class="cta-button" bindtap="contactUs">ç«‹å³å’¨è¯¢</button>
    </view>
  </view>
</template>

<script lang="ts">
import { createPage } from '@mpxjs/core'

interface Category {
  id: number
  name: string
}

interface Product {
  id: number
  name: string
  description: string
  iconText: string
  categoryId: number
  categoryName: string
  price?: number
  status: 'new' | 'hot' | 'recommended'
  features: string[]
  specs: { [key: string]: string }
}

createPage({
  data: {
    currentCategory: 0,
    categories: [
      { id: 0, name: 'å…¨éƒ¨' },
      { id: 1, name: 'æ™ºèƒ½ç¡¬ä»¶' },
      { id: 2, name: 'è½¯ä»¶è§£å†³æ–¹æ¡ˆ' },
      { id: 3, name: 'äº‘æœåŠ¡' },
      { id: 4, name: 'å’¨è¯¢æœåŠ¡' }
    ] as Category[],

    products: [
      {
        id: 1,
        name: 'æ™ºèƒ½ç»ˆç«¯è®¾å¤‡ Pro',
        description: 'é«˜æ€§èƒ½æ™ºèƒ½ç»ˆç«¯ï¼Œæ”¯æŒå¤šç§åè®®æ¥å…¥ï¼Œé€‚ç”¨äºå·¥ä¸šç‰©è”ç½‘åœºæ™¯',
iconText: 'ğŸ–¥ï¸',
        categoryId: 1,
        categoryName: 'æ™ºèƒ½ç¡¬ä»¶',
        price: 2999,
        status: 'new',
        features: ['æ”¯æŒ5Gç½‘ç»œ', 'å·¥ä¸šçº§é˜²æŠ¤', 'è¶…é•¿ç»­èˆª'],
        specs: {
          'å¤„ç†å™¨': 'ARM Cortex-A72',
          'å†…å­˜': '4GB LPDDR4',
          'å­˜å‚¨': '64GB eMMC',
          'æ“ä½œæ¸©åº¦': '-20Â°C ~ +70Â°C'
        }
      },
      {
        id: 2,
        name: 'æ•°æ®ç®¡ç†å¹³å°',
        description: 'ä¸€ç«™å¼æ•°æ®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨ã€åˆ†æå’Œå¯è§†åŒ–',
iconText: 'ğŸ“ˆ',
        categoryId: 2,
        categoryName: 'è½¯ä»¶è§£å†³æ–¹æ¡ˆ',
        status: 'hot',
        features: ['å®æ—¶æ•°æ®å¤„ç†', 'æ™ºèƒ½åˆ†æ', 'å¯è§†åŒ–æŠ¥è¡¨'],
        specs: {
          'æ•°æ®å®¹é‡': 'â‰¥100TB',
          'å¹¶å‘ç”¨æˆ·': 'â‰¥10000',
          'å“åº”æ—¶é—´': 'â‰¤100ms',
          'å¯ç”¨æ€§': '99.9%'
        }
      },
      {
        id: 3,
        name: 'äº‘åŸç”Ÿåº”ç”¨å¹³å°',
        description: 'åŸºäºå®¹å™¨æŠ€æœ¯çš„äº‘åŸç”Ÿåº”ç”¨å¼€å‘å’Œéƒ¨ç½²å¹³å°',
iconText: 'â˜ï¸',
        categoryId: 3,
        categoryName: 'äº‘æœåŠ¡',
        status: 'recommended',
        features: ['å®¹å™¨åŒ–éƒ¨ç½²', 'è‡ªåŠ¨ä¼¸ç¼©', 'å¾®æœåŠ¡æ¶æ„'],
        specs: {
          'å®¹å™¨æŠ€æœ¯': 'Docker + Kubernetes',
          'æ”¯æŒè¯­è¨€': 'Java, Python, Node.js',
          'éƒ¨ç½²æ–¹å¼': 'å…¬æœ‰äº‘/ç§æœ‰äº‘/æ··åˆäº‘',
          'SLA': '99.95%'
        }
      },
      {
        id: 4,
        name: 'ä¼ä¸šæ•°å­—åŒ–è½¬å‹å’¨è¯¢',
        description: 'ä¸ºä¼ä¸šæä¾›å…¨æ–¹ä½çš„æ•°å­—åŒ–è½¬å‹ç­–ç•¥è§„åˆ’å’Œå®æ–½æŒ‡å¯¼',
iconText: 'ğŸ“Š',
        categoryId: 4,
        categoryName: 'å’¨è¯¢æœåŠ¡',
        status: 'recommended',
        features: ['æˆ˜ç•¥è§„åˆ’', 'æŠ€æœ¯é€‰å‹', 'å®æ–½æŒ‡å¯¼'],
        specs: {
          'æœåŠ¡å‘¨æœŸ': '3-12ä¸ªæœˆ',
          'äº¤ä»˜æˆæœ': 'è½¬å‹æ–¹æ¡ˆ+å®æ–½è®¡åˆ’',
          'åç»­æ”¯æŒ': '12ä¸ªæœˆ',
          'æˆåŠŸç‡': '>95%'
        }
      },
      {
        id: 5,
        name: 'æ™ºèƒ½ä¼ æ„Ÿå™¨',
        description: 'é«˜ç²¾åº¦å¤šå‚æ•°ä¼ æ„Ÿå™¨ï¼Œé€‚ç”¨äºç¯å¢ƒç›‘æµ‹å’Œå·¥ä¸šæ§åˆ¶',
iconText: 'ğŸ”Œ',
        categoryId: 1,
        categoryName: 'æ™ºèƒ½ç¡¬ä»¶',
        price: 599,
        status: 'hot',
        features: ['é«˜ç²¾åº¦æµ‹é‡', 'æ— çº¿ä¼ è¾“', 'ä½åŠŸè€—è®¾è®¡'],
        specs: {
          'æµ‹é‡ç²¾åº¦': 'Â±0.1%',
          'é€šä¿¡æ–¹å¼': 'LoRa/NB-IoT',
          'ç”µæ± å¯¿å‘½': '5å¹´',
          'é˜²æŠ¤ç­‰çº§': 'IP67'
        }
      },
      {
        id: 6,
        name: 'å®‰å…¨è¿è¥ä¸­å¿ƒ',
        description: '7Ã—24å°æ—¶å®‰å…¨ç›‘æ§å’Œå¨èƒæ£€æµ‹å¹³å°ï¼Œä¿éšœä¼ä¸šç½‘ç»œå®‰å…¨',
iconText: 'ğŸ”’',
        categoryId: 2,
        categoryName: 'è½¯ä»¶è§£å†³æ–¹æ¡ˆ',
        status: 'new',
        features: ['å¨èƒæ£€æµ‹', 'å®‰å…¨åˆ†æ', 'åº”æ€¥å“åº”'],
        specs: {
          'ç›‘æ§èƒ½åŠ›': '10Gbps',
          'æ£€æµ‹å‡†ç¡®ç‡': '>99%',
          'å“åº”æ—¶é—´': '<1åˆ†é’Ÿ',
          'æ”¯æŒåè®®': '100+'
        }
      }
    ] as Product[],

    filteredProducts: [] as Product[]
  },

  onLoad() {
    wx.setNavigationBarTitle({
      title: 'æœ€æ–°äº§å“'
    })
    this.filterProducts({ target: { dataset: { category: 0 } } } as any)
  },

  onShow() {
    if (typeof this.getTabBar === 'function' && this.getTabBar()) {
      this.getTabBar().setData({
        selected: 1
      })
    }
  },

  filterProducts(event: any) {
    const categoryId = event.target.dataset.category
    this.setData({
      currentCategory: categoryId,
      filteredProducts: categoryId === 0 
        ? this.data.products 
        : this.data.products.filter(product => product.categoryId === categoryId)
    })
  },

  viewProduct() {
    wx.showToast({
      title: 'äº§å“è¯¦æƒ…å¼€å‘ä¸­',
      icon: 'none'
    })
  },

  contactUs() {
    wx.showToast({
      title: 'åŠŸèƒ½å¼€å‘ä¸­',
      icon: 'none'
    })
  }
})
</script>

<style lang="stylus">
.products-page
  background-color #f5f5f5
  min-height 100vh
  padding-bottom calc(100rpx + env(safe-area-inset-bottom) + 20rpx)

.header-section
  background linear-gradient(135deg, #667eea 0%, #764ba2 100%)
  padding 60rpx 30rpx 40rpx
  color white
  text-align center

.page-title
  font-size 48rpx
  font-weight bold
  margin-bottom 16rpx
  display block

.page-subtitle
  font-size 28rpx
  opacity 0.9
  display block

.filter-section
  background white
  padding 20rpx 0
  box-shadow 0 2rpx 10rpx rgba(0, 0, 0, 0.05)

.filter-scroll
  width 100%
  overflow-x auto
  overflow-y hidden

.filter-list
  display flex
  gap 20rpx
  padding 0 30rpx
  white-space nowrap
  min-width max-content

.filter-item
  padding 16rpx 32rpx
  background #f8f9fa
  border-radius 24rpx
  font-size 26rpx
  color #666
  transition all 0.3s ease
  flex-shrink 0
  white-space nowrap

.filter-item.active
  background #007aff
  color white

.products-section
  padding 30rpx

.products-grid
  display flex
  flex-direction column
  gap 30rpx

.product-card
  background white
  border-radius 16rpx
  overflow hidden
  box-shadow 0 4rpx 20rpx rgba(0, 0, 0, 0.06)
  transition transform 0.3s ease

.product-card:active
  transform scale(0.98)

.product-image
  width 100%
  height 300rpx
  display flex
  justify-content center
  align-items center
  background linear-gradient(135deg, #667eea 0%, #764ba2 100%)

.product-icon
  font-size 100rpx
  color white

.product-info
  padding 30rpx

.product-name
  font-size 32rpx
  font-weight bold
  color #333
  margin-bottom 12rpx
  display block

.product-category
  font-size 24rpx
  color #007aff
  margin-bottom 16rpx
  display block

.product-description
  font-size 26rpx
  color #666
  line-height 1.6
  margin-bottom 20rpx
  display block

.product-footer
  display flex
  justify-content space-between
  align-items center

.product-price
  font-size 32rpx
  font-weight bold
  color #ff4757

.product-status
  padding 8rpx 16rpx
  border-radius 12rpx
  font-size 22rpx
  font-weight bold

.status-new
  background rgba(52, 168, 83, 0.1)
  color #34a853

.status-hot
  background rgba(255, 71, 87, 0.1)
  color #ff4757

.empty-state
  display flex
  flex-direction column
  align-items center
  padding 80rpx 30rpx
  background white
  border-radius 16rpx

.empty-icon
  font-size 120rpx
  margin-bottom 30rpx
  opacity 0.3
  display block

.empty-text
  font-size 28rpx
  color #999

.cta-section
  margin 40rpx 30rpx 20rpx
  padding 50rpx 40rpx
  background linear-gradient(135deg, #667eea 0%, #764ba2 100%)
  border-radius 20rpx
  text-align center
  color white

.cta-title
  font-size 36rpx
  font-weight bold
  margin-bottom 16rpx
  display block

.cta-subtitle
  font-size 26rpx
  opacity 0.9
  margin-bottom 40rpx
  display block
  line-height 1.5

.cta-button
  background rgba(255, 255, 255, 0.2)
  color white
  border none
  padding 24rpx 60rpx
  border-radius 50rpx
  font-size 30rpx
  font-weight bold
  backdrop-filter blur(10rpx)

.cta-button::after
  border none
</style>

<script type="application/json">
{
  "navigationBarTitleText": "æœ€æ–°äº§å“"
}
</script>